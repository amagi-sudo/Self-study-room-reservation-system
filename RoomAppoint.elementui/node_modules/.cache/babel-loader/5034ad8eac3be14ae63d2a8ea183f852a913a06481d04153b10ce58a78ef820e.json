{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ValidCode from '@/components/Code/canvas.vue';\nimport store from '@/store';\nexport default {\n  components: {\n    ValidCode\n  },\n  data() {\n    return {\n      formData: {\n        UserName: '',\n        Password: '',\n        RoleType: \"\",\n        Code: \"\"\n      },\n      roleOptions: [],\n      rules: {\n        UserName: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        Password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }],\n        RoleType: [{\n          required: true,\n          message: '请选择角色',\n          trigger: 'blur'\n        }],\n        Code: [{\n          required: true,\n          message: '请输入验证码',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            let identifyCode = this.$refs.ValidCode.getCode();\n            if (value != identifyCode) {\n              callback(new Error('请输入正确的验证码'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.GetRoleTypeApi();\n  },\n  mounted() {\n    this.initStarrySky();\n  },\n  beforeDestroy() {\n    if (this.starrySkyAnimation) {\n      cancelAnimationFrame(this.starrySkyAnimation);\n    }\n  },\n  methods: {\n    async GetRoleTypeApi() {\n      let {\n        Data: {\n          Items\n        }\n      } = await this.$Post(\"/Select/RoleType\");\n      this.roleOptions = Items;\n    },\n    LoginBtn() {\n      this.$refs.loginForm.validate(async valid => {\n        if (valid) {\n          let res = await store.dispatch(\"Login\", this.formData);\n          if (res.Success) {\n            this.$message.success(\"登录成功!\");\n            this.$router.push({\n              path: \"/Admin\"\n            });\n          } else {\n            this.$refs.ValidCode.refreshCode();\n          }\n        } else {\n          this.$message.error(\"登录验证不通过\");\n          this.$refs.ValidCode.refreshCode();\n          return false;\n        }\n      });\n    },\n    ToHome() {\n      this.$router.push({\n        path: \"/Front/Home\"\n      });\n    },\n    initStarrySky() {\n      const canvas = document.getElementById('starrySky');\n      const ctx = canvas.getContext('2d');\n      const width = canvas.width = window.innerWidth;\n      const height = canvas.height = window.innerHeight;\n      class Star {\n        constructor() {\n          this.x = Math.random() * width;\n          this.y = Math.random() * height;\n          this.size = Math.random() * 2;\n          this.speedX = Math.random() * 3 - 1.5;\n          this.speedY = Math.random() * 3 - 1.5;\n        }\n        update() {\n          this.x += this.speedX;\n          this.y += this.speedY;\n          if (this.x > width || this.x < 0) this.speedX = -this.speedX;\n          if (this.y > height || this.y < 0) this.speedY = -this.speedY;\n        }\n        draw() {\n          ctx.beginPath();\n          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n          ctx.fillStyle = '#FFFF00';\n          ctx.fill();\n        }\n      }\n      const stars = Array(200).fill(0).map(() => new Star());\n      const animate = () => {\n        ctx.fillStyle = '#000033';\n        ctx.fillRect(0, 0, width, height);\n        stars.forEach(star => {\n          star.update();\n          star.draw();\n        });\n        this.starrySkyAnimation = requestAnimationFrame(animate);\n      };\n      animate();\n    },\n    handleForgetPassword() {\n      this.$message.info('请联系管理员重置密码');\n    }\n  }\n};","map":{"version":3,"names":["ValidCode","store","components","data","formData","UserName","Password","RoleType","Code","roleOptions","rules","required","message","trigger","validator","rule","value","callback","identifyCode","$refs","getCode","Error","created","GetRoleTypeApi","mounted","initStarrySky","beforeDestroy","starrySkyAnimation","cancelAnimationFrame","methods","Data","Items","$Post","LoginBtn","loginForm","validate","valid","res","dispatch","Success","$message","success","$router","push","path","refreshCode","error","ToHome","canvas","document","getElementById","ctx","getContext","width","window","innerWidth","height","innerHeight","Star","constructor","x","Math","random","y","size","speedX","speedY","update","draw","beginPath","arc","PI","fillStyle","fill","stars","Array","map","animate","fillRect","forEach","star","requestAnimationFrame","handleForgetPassword","info"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\n  <div>\n    <canvas id=\"starrySky\"></canvas>\n    <div style=\"height: 100vh; display: flex; align-items: center; justify-content: center;\">\n      <div\n        style=\"background-color: white; padding: 30px 40px; border-radius: 15px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\">\n        <div style=\"width: 480px;\">\n          <h2 class=\"welcome-title\" style=\"margin-bottom: 25px; font-size: 22px;\">欢迎您~来到诚凛自习室预约系统</h2>\n          <el-form ref=\"loginForm\" :model=\"formData\" label-width=\"70px\" label-position=\"left\" :rules=\"rules\">\n            <el-form-item label=\"账号\" prop=\"UserName\" style=\"margin-bottom: 20px;\">\n              <el-input type=\"text\" v-model.trim=\"formData.UserName\" placeholder=\"请输入账号\"\n                style=\"height: 44px; padding: 0 15px; font-size: 15px;\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" prop=\"Password\" style=\"margin-bottom: 20px;\">\n              <el-input type=\"password\" v-model.trim=\"formData.Password\" placeholder=\"请输入密码\"\n                style=\"height: 44px; padding: 0 15px; font-size: 15px;\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"角色\" prop=\"RoleType\" style=\"margin-bottom: 20px;\">\n              <el-radio-group v-model=\"formData.RoleType\"\n                style=\"display: flex; gap: 20px; align-items: center; flex-wrap: nowrap;\">\n                <el-radio v-for=\"(item, index) in roleOptions\" :key=\"item.Code\" :label=\"item.Code\"\n                  style=\"font-size: 15px;\">{{ item.Label }}</el-radio>\n              </el-radio-group>\n            </el-form-item>\n            <!-- 关键调整：移除flex布局，遵循表单默认标签对齐方式 -->\n            <el-form-item label=\"验证码\" prop=\"Code\" style=\"margin-bottom: 25px;\">\n              <el-input type=\"text\" v-model.trim=\"formData.Code\" placeholder=\"请输入验证码\"\n                style=\"width: 180px; height: 44px; padding: 0 15px; font-size: 15px; min-width: 150px;\">\n              </el-input>\n              <div style=\"width: 120px; height: 44px; margin-top: 8px;\"> <!-- 微调验证码图片垂直位置 -->\n                <ValidCode ref=\"ValidCode\"></ValidCode>\n              </div>\n            </el-form-item>\n            <el-form-item style=\"margin-bottom: 15px; display: flex; justify-content: center;\">\n              <el-button type=\"primary\" @click=\"LoginBtn\"\n                style=\"width: 200px; height: 48px; font-size: 16px; letter-spacing: 2px;\">登 录</el-button>\n            </el-form-item>\n            <el-form-item style=\"margin-bottom: 25px; display: flex; justify-content: center;\">\n              <el-button type=\"danger\" @click=\"ToHome\"\n                style=\"width: 200px; height: 48px; font-size: 16px; letter-spacing: 2px;\">前 台</el-button>\n            </el-form-item>\n          </el-form>\n          <div style=\"display: flex; justify-content: space-between; align-items: center; gap: 10px;\">\n            <div style=\"display: flex; align-items: center; gap: 8px; font-size: 14px;\">\n              <span>还没有账号？</span>\n              <RouterLink :to=\"{ path: '/Register' }\" style=\"color: #F98C54; cursor: pointer; font-weight: 500;\">立即注册\n              </RouterLink>\n            </div>\n            <div style=\"color: #E91E63; cursor: pointer; font-size: 14px; font-weight: 500;\"\n              @click=\"handleForgetPassword\">忘记密码？</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ValidCode from '@/components/Code/canvas.vue'\nimport store from '@/store';\n\nexport default {\n  components: { ValidCode },\n  data() {\n    return {\n      formData: {\n        UserName: '',\n        Password: '',\n        RoleType: \"\",\n        Code: \"\"\n      },\n      roleOptions: [],\n      rules: {\n        UserName: [\n          { required: true, message: '请输入账号', trigger: 'blur' },\n        ],\n        Password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ],\n        RoleType: [\n          { required: true, message: '请选择角色', trigger: 'blur' },\n        ],\n        Code: [\n          { required: true, message: '请输入验证码', trigger: 'blur' },\n          {\n            validator: (rule, value, callback) => {\n              let identifyCode = this.$refs.ValidCode.getCode();\n              if (value != identifyCode) {\n                callback(new Error('请输入正确的验证码'));\n              } else {\n                callback();\n              }\n            },\n            trigger: 'blur'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.GetRoleTypeApi();\n  },\n  mounted() {\n    this.initStarrySky();\n  },\n  beforeDestroy() {\n    if (this.starrySkyAnimation) {\n      cancelAnimationFrame(this.starrySkyAnimation);\n    }\n  },\n  methods: {\n    async GetRoleTypeApi() {\n      let { Data: { Items } } = await this.$Post(\"/Select/RoleType\");\n      this.roleOptions = Items;\n    },\n    LoginBtn() {\n      this.$refs.loginForm.validate(async (valid) => {\n        if (valid) {\n          let res = await store.dispatch(\"Login\", this.formData);\n          if (res.Success) {\n            this.$message.success(\"登录成功!\");\n            this.$router.push({ path: \"/Admin\" });\n          } else {\n            this.$refs.ValidCode.refreshCode();\n          }\n        } else {\n          this.$message.error(\"登录验证不通过\");\n          this.$refs.ValidCode.refreshCode();\n          return false;\n        }\n      });\n    },\n    ToHome() {\n      this.$router.push({ path: \"/Front/Home\" });\n    },\n    initStarrySky() {\n      const canvas = document.getElementById('starrySky');\n      const ctx = canvas.getContext('2d');\n      const width = canvas.width = window.innerWidth;\n      const height = canvas.height = window.innerHeight;\n\n      class Star {\n        constructor() {\n          this.x = Math.random() * width;\n          this.y = Math.random() * height;\n          this.size = Math.random() * 2;\n          this.speedX = Math.random() * 3 - 1.5;\n          this.speedY = Math.random() * 3 - 1.5;\n        }\n\n        update() {\n          this.x += this.speedX;\n          this.y += this.speedY;\n          if (this.x > width || this.x < 0) this.speedX = -this.speedX;\n          if (this.y > height || this.y < 0) this.speedY = -this.speedY;\n        }\n\n        draw() {\n          ctx.beginPath();\n          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n          ctx.fillStyle = '#FFFF00';\n          ctx.fill();\n        }\n      }\n\n      const stars = Array(200).fill(0).map(() => new Star());\n\n      const animate = () => {\n        ctx.fillStyle = '#000033';\n        ctx.fillRect(0, 0, width, height);\n        stars.forEach(star => {\n          star.update();\n          star.draw();\n        });\n        this.starrySkyAnimation = requestAnimationFrame(animate);\n      };\n\n      animate();\n    },\n    handleForgetPassword() {\n      this.$message.info('请联系管理员重置密码');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.welcome-title {\n  font-size: 22px;\n  font-weight: 600;\n  background: linear-gradient(90deg, #4f6d7a 20%, #6a8b9a 50%, #8b9bb7 80%);\n  -webkit-background-clip: text;\n  color: transparent;\n  text-align: center;\n  letter-spacing: 1.5px;\n  line-height: 1.4;\n}\n\n#starrySky {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  background: linear-gradient(180deg, #000033 0%, #000022 100%);\n}\n\n.el-radio__label {\n  font-size: 15px;\n}\n\n.el-input__inner {\n  transition: all 0.3s ease;\n}\n\n.el-input__inner:focus {\n  border-color: #4f6d7a !important;\n  box-shadow: 0 0 0 2px rgba(79, 109, 122, 0.1);\n}\n\n.el-button--primary {\n  background-color: #4f6d7a;\n  border-color: #4f6d7a;\n}\n\n.el-button--primary:hover {\n  background-color: #6a8b9a;\n  border-color: #6a8b9a;\n}\n\n.el-button--danger {\n  background-color: #E91E63;\n  border-color: #E91E63;\n}\n\n.el-button--danger:hover {\n  background-color: #FF4081;\n  border-color: #FF4081;\n}\n\n.el-button {\n  transition: transform 0.2s ease;\n}\n\n.el-button:hover {\n  transform: translateY(-2px);\n}\n\n.el-form-item {\n  margin-bottom: 20px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}