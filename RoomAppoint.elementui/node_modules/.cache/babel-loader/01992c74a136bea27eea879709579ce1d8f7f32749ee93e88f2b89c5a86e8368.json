{"ast":null,"code":"import store from \"@/store\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  props: {\n    url: {\n      type: String,\n      //默认的请求路径\n      default: \"\"\n    },\n    where: {\n      type: [Number, String, Object],\n      default: \"\"\n    }\n  },\n  watch: {},\n  data() {\n    return {\n      loading: false,\n      //是否正在获取数据中\n      options: [],\n      where_: {},\n      pagination: {\n        limit: 10,\n        page: 1,\n        total: 0,\n        pageSizes: [8, 16, 24, 32, 40, 50, 100]\n      },\n      selectOption: {}\n    };\n  },\n  created() {\n    this.where_ = this.$props.where;\n    this.FetchDataList();\n  },\n  methods: {\n    InitData() {\n      this.pagination.limit = 10;\n      this.pagination.page = 1;\n      this.pagination.total = 0;\n      this.where_ = {};\n    },\n    async Reload(where) {\n      this.pagination.page = 1;\n      this.pagination.total = 0;\n      var searchWhere = {};\n      if (where) {\n        searchWhere = Object.assign(searchWhere, where);\n      }\n      this.FetchDataList(searchWhere);\n    },\n    async FetchDataList(searchWhere) {\n      this.loading = true;\n      let {\n        Data: {\n          Items,\n          TotalCount\n        }\n      } = await this.$Post(this.$props.url, {\n        Limit: this.pagination.limit,\n        Size: this.pagination.limit,\n        Page: this.pagination.page,\n        ...this.where_,\n        ...searchWhere\n      });\n      this.loading = false;\n      this.options = Items;\n      this.pagination.total = TotalCount;\n    },\n    handleCurrentChange(event) {\n      this.pagination.page = event;\n      this.FetchDataList();\n    },\n    handleSizeChange(event) {\n      this.pagination.limit = event;\n      this.pagination.page = 1;\n      this.FetchDataList();\n    }\n  }\n};","map":{"version":3,"names":["store","mapGetters","props","url","type","String","default","where","Number","Object","watch","data","loading","options","where_","pagination","limit","page","total","pageSizes","selectOption","created","$props","FetchDataList","methods","InitData","Reload","searchWhere","assign","Data","Items","TotalCount","$Post","Limit","Size","Page","handleCurrentChange","event","handleSizeChange"],"sources":["src/components/Pagination/PaginationBox.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin: 15px 0px;\">\r\n    <div v-if=\"loading\"><el-skeleton :rows=\"12\" animated /></div>\r\n    <div v-else>\r\n      <el-empty v-if=\"options.length == 0\" description=\"看官，数据正在维护中\"></el-empty>\r\n      <div v-else class=\"box\">\r\n        <slot name=\"content\" :data=\"options\"></slot>\r\n      </div>\r\n    </div>\r\n    <div class=\"custom-pagination\">\r\n      <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pagination.page\" :page-sizes=\"pagination.pageSizes\" :page-size=\"pagination.limit\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"pagination.total\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport store from \"@/store\";\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n\r\n  props: {\r\n\r\n\r\n\r\n    url: {\r\n      type: String, //默认的请求路径\r\n      default: \"\",\r\n    },\r\n    where: {\r\n      type: [Number, String, Object],\r\n      default: \"\"\r\n    },\r\n\r\n  },\r\n  watch: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false, //是否正在获取数据中\r\n      options: [],\r\n      where_: {},\r\n      pagination: {\r\n        limit: 10,\r\n        page: 1,\r\n        total: 0,\r\n        pageSizes: [8, 16, 24, 32, 40, 50, 100],\r\n      },\r\n      selectOption: {},\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.where_ = this.$props.where;\r\n    this.FetchDataList();\r\n  },\r\n  methods: {\r\n\r\n    InitData() {\r\n      this.pagination.limit = 10;\r\n      this.pagination.page = 1;\r\n      this.pagination.total = 0;\r\n\r\n      this.where_ = {};\r\n    },\r\n    async Reload(where) {\r\n      this.pagination.page = 1;\r\n      this.pagination.total = 0;\r\n      var searchWhere = {};\r\n      if (where) {\r\n        searchWhere = Object.assign(searchWhere, where);\r\n      }\r\n      this.FetchDataList(searchWhere);\r\n    },\r\n    async FetchDataList(searchWhere) {\r\n      this.loading = true;\r\n      let {\r\n        Data: {\r\n          Items,\r\n          TotalCount\r\n        }\r\n      } = await this.$Post(this.$props.url, {\r\n        Limit: this.pagination.limit,\r\n        Size: this.pagination.limit,\r\n        Page: this.pagination.page,\r\n        ...this.where_,\r\n        ...searchWhere\r\n      });\r\n      this.loading = false;\r\n      this.options = Items;\r\n      this.pagination.total = TotalCount;\r\n    },\r\n\r\n    handleCurrentChange(event) {\r\n      this.pagination.page = event;\r\n      this.FetchDataList();\r\n    },\r\n    handleSizeChange(event) {\r\n      this.pagination.limit = event;\r\n      this.pagination.page = 1;\r\n\r\n      this.FetchDataList();\r\n    },\r\n\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n.box {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  box-sizing: border-box;\r\n\r\n}\r\n\r\n.item {\r\n  width: 100%;\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n\r\n}\r\n\r\n.content-cut {\r\n\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  word-break: break-all;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 4;\r\n\r\n  line-height: 1.2em;\r\n}\r\n\r\n.card {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\r\n  height: 100%;\r\n  border-radius: 10px;\r\n\r\n\r\n}\r\n\r\n.custom-pagination {\r\n  margin-top: 20px;\r\n  padding-bottom: 20px;\r\n  display: flex;\r\n  flex-direction: row-reverse;\r\n}\r\n</style>\r\n"],"mappings":"AAoBA,OAAAA,KAAA;AACA,SAAAC,UAAA;AACA;EAEAC,KAAA;IAIAC,GAAA;MACAC,IAAA,EAAAC,MAAA;MAAA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,GAAAI,MAAA,EAAAH,MAAA,EAAAI,MAAA;MACAH,OAAA;IACA;EAEA;EACAI,KAAA,GAEA;EACAC,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,OAAA;MACAC,MAAA;MACAC,UAAA;QACAC,KAAA;QACAC,IAAA;QACAC,KAAA;QACAC,SAAA;MACA;MACAC,YAAA;IAEA;EACA;EACAC,QAAA;IACA,KAAAP,MAAA,QAAAQ,MAAA,CAAAf,KAAA;IACA,KAAAgB,aAAA;EACA;EACAC,OAAA;IAEAC,SAAA;MACA,KAAAV,UAAA,CAAAC,KAAA;MACA,KAAAD,UAAA,CAAAE,IAAA;MACA,KAAAF,UAAA,CAAAG,KAAA;MAEA,KAAAJ,MAAA;IACA;IACA,MAAAY,OAAAnB,KAAA;MACA,KAAAQ,UAAA,CAAAE,IAAA;MACA,KAAAF,UAAA,CAAAG,KAAA;MACA,IAAAS,WAAA;MACA,IAAApB,KAAA;QACAoB,WAAA,GAAAlB,MAAA,CAAAmB,MAAA,CAAAD,WAAA,EAAApB,KAAA;MACA;MACA,KAAAgB,aAAA,CAAAI,WAAA;IACA;IACA,MAAAJ,cAAAI,WAAA;MACA,KAAAf,OAAA;MACA;QACAiB,IAAA;UACAC,KAAA;UACAC;QACA;MACA,eAAAC,KAAA,MAAAV,MAAA,CAAAnB,GAAA;QACA8B,KAAA,OAAAlB,UAAA,CAAAC,KAAA;QACAkB,IAAA,OAAAnB,UAAA,CAAAC,KAAA;QACAmB,IAAA,OAAApB,UAAA,CAAAE,IAAA;QACA,QAAAH,MAAA;QACA,GAAAa;MACA;MACA,KAAAf,OAAA;MACA,KAAAC,OAAA,GAAAiB,KAAA;MACA,KAAAf,UAAA,CAAAG,KAAA,GAAAa,UAAA;IACA;IAEAK,oBAAAC,KAAA;MACA,KAAAtB,UAAA,CAAAE,IAAA,GAAAoB,KAAA;MACA,KAAAd,aAAA;IACA;IACAe,iBAAAD,KAAA;MACA,KAAAtB,UAAA,CAAAC,KAAA,GAAAqB,KAAA;MACA,KAAAtB,UAAA,CAAAE,IAAA;MAEA,KAAAM,aAAA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}