{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '@/store';\nimport { Message } from 'element-ui';\nimport { getToken, setToken, removeToken } from '@/utils/cache';\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\n\nVue.use(VueRouter);\nimport AdminLayout from \"@/views/Admin/Layout/index.vue\";\nconst routes = [{\n  path: \"/\",\n  component: () => import(\"@/components/HelloWorld.vue\")\n}, {\n  path: \"/Login\",\n  component: () => import(\"@/views/Login.vue\")\n}, {\n  path: \"/Register\",\n  component: () => import(\"@/views/Register.vue\")\n}];\nexport const adminRouters = [{\n  path: \"/Admin\",\n  redirect: \"/Admin/Home\",\n  component: AdminLayout,\n  meta: {\n    title: \"控制台\",\n    isAdmin: true\n  },\n  children: [{\n    path: \"/Admin/Home\",\n    meta: {\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/Home\")\n  }, {\n    path: \"/Admin/UserList\",\n    meta: {\n      title: \"用户信息\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/UserList\")\n  }, {\n    path: \"/Admin/UserPerson\",\n    meta: {\n      title: \"个人信息\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/UserPerson\")\n  }, {\n    path: \"/Admin/PasswordEdit\",\n    meta: {\n      title: \"修改密码\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/PasswordEdit\")\n  }, {\n    path: \"/Admin/AppointRecordList\",\n    meta: {\n      title: \"预约记录\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/AppointRecordList\")\n  }, {\n    path: \"/Admin/BannerList\",\n    meta: {\n      title: \"封面\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/BannerList\")\n  }, {\n    path: \"/Admin/IntegralList\",\n    meta: {\n      title: \"积分\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/IntegralList\")\n  }, {\n    path: \"/Admin/RoomList\",\n    meta: {\n      title: \"自习室\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/RoomList\")\n  }, {\n    path: \"/Admin/SeatList\",\n    meta: {\n      title: \"座位\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/SeatList\")\n  }]\n}];\nconst router = new VueRouter({\n  routes: [...routes, ...adminRouters] // (缩写) 相当于 routes: routes\n});\n\n// 编写导航路由\nrouter.beforeEach(async (to, from, next) => {\n  NProgress.start();\n  const hasToken = getToken();\n  console.log(hasToken);\n  if (hasToken) {\n    if (store.getters.HasUserInfo == false) {\n      await store.dispatch('GetInfo');\n    }\n    //如果去往的页面是后台\n    if (to.meta && to.meta.isAdmin) {\n      if (store.getters.RoleType == \"管理员\") {\n        next();\n      } else {\n        next({\n          path: \"/\"\n        });\n      }\n    } else {\n      if (store.getters.RoleType == \"管理员\") {\n        next({\n          path: \"/Admin\"\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    if (to.meta && to.meta.isAdmin) {\n      next({\n        path: \"/Login\"\n      });\n    } else {\n      next();\n    }\n  }\n  NProgress.done();\n});\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","store","Message","getToken","setToken","removeToken","NProgress","use","AdminLayout","routes","path","component","adminRouters","redirect","meta","title","isAdmin","children","router","beforeEach","to","from","next","start","hasToken","console","log","getters","HasUserInfo","dispatch","RoleType","done","afterEach"],"sources":["D:/自习室预约系统/RoomAppoint.elementui/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport store from '@/store'\nimport { Message } from 'element-ui'\nimport { getToken, setToken, removeToken } from '@/utils/cache'\nimport NProgress from 'nprogress' // progress bar\nimport 'nprogress/nprogress.css' // progress bar style\n\nVue.use(VueRouter)\nimport AdminLayout from \"@/views/Admin/Layout/index.vue\"\n\nconst routes = [\n    {\n        path: \"/\", component: () => import(\"@/components/HelloWorld.vue\")\n    },\n    {\n        path: \"/Login\", component: () => import(\"@/views/Login.vue\")\n    },\n    {\n        path: \"/Register\", component: () => import(\"@/views/Register.vue\")\n    },\n\n]\nexport const adminRouters = [{\n    path: \"/Admin\",\n    redirect: \"/Admin/Home\",\n    component: AdminLayout,\n    meta: {\n        title: \"控制台\",\n        isAdmin: true,\n\n    },\n    children: [\n        {\n            path: \"/Admin/Home\",\n            meta: {\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/Home\")\n        },\n        {\n            path: \"/Admin/UserList\",\n            meta: {\n                title: \"用户信息\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/UserList\")\n        },\n        {\n            path: \"/Admin/UserPerson\",\n            meta: {\n                title: \"个人信息\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/UserPerson\")\n        },\n        {\n            path: \"/Admin/PasswordEdit\",\n            meta: {\n                title: \"修改密码\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/PasswordEdit\")\n        },\n\n      \t {\n            path: \"/Admin/AppointRecordList\",\n            meta: {\n                title: \"预约记录\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/AppointRecordList\")\n        },\t\n \n      \t {\n            path: \"/Admin/BannerList\",\n            meta: {\n                title: \"封面\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/BannerList\")\n        },\t\n \n      \t {\n            path: \"/Admin/IntegralList\",\n            meta: {\n                title: \"积分\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/IntegralList\")\n        },\t\n \n      \t {\n            path: \"/Admin/RoomList\",\n            meta: {\n                title: \"自习室\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/RoomList\")\n        },\t\n \n      \t {\n            path: \"/Admin/SeatList\",\n            meta: {\n                title: \"座位\",\n                isAdmin: true,\n            },\n            component: () => import(\"@/views/Admin/SeatList\")\n        },\t\n \n\n\n    ]\n\n},\n]\n\nconst router = new VueRouter({\n    routes: [...routes, ...adminRouters] // (缩写) 相当于 routes: routes\n})\n\n\n// 编写导航路由\nrouter.beforeEach(async (to, from, next) => {\n\n    NProgress.start()\n    const hasToken = getToken()\n    console.log(hasToken)\n    if (hasToken) {\n\n        if (store.getters.HasUserInfo == false) {\n            await store.dispatch('GetInfo');\n        }\n        //如果去往的页面是后台\n        if (to.meta && to.meta.isAdmin) {\n            if (store.getters.RoleType == \"管理员\") {\n                next()\n            }\n            else {\n                next({ path: \"/\" })\n            }\n        }\n        else {\n            if (store.getters.RoleType == \"管理员\") {\n                next({ path: \"/Admin\" })\n            }\n            else {\n                next()\n            }\n        }\n\n    }\n    else {\n        if (to.meta && to.meta.isAdmin) {\n            next({ path: \"/Login\" })\n        }\n        else {\n            next()\n        }\n    }\n    NProgress.done()\n\n})\nrouter.afterEach(() => {\n    // finish progress bar\n    NProgress.done()\n})\n\n\nexport default router;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}