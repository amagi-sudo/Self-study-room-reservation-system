{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport store from \"@/store\";\nexport default {\n  props: {\n    value: {\n      type: [Number, String],\n      default: ''\n    },\n    url: {\n      type: String,\n      //默认的请求路径\n      default: \"\"\n    },\n    columnName: {\n      type: String,\n      //需要绑定Name的值\n      default: \"\"\n    },\n    columnValue: {\n      type: String,\n      //需要绑定Value的值\n      default: \"\"\n    },\n    columnLabel: {\n      type: String,\n      //需要绑定Label的值\n      default: \"\"\n    },\n    where: {},\n    filterValue: {\n      type: Array,\n      //需要绑定Value的值\n      default: () => []\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    \"value\": {\n      immediate: true,\n      //该回调将会在侦听开始之后被立即调用\n      handler: function (n, o) {\n        if (n?.toString()?.length > 0) {\n          this.selectValue = n.toString();\n        } else {\n          this.selectValue = n;\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      //是否正在获取数据中\n      options: [],\n      where_: {},\n      //默认\n      searchWhere: {},\n      //搜索带过来的条件\n      selectValue: undefined\n    };\n  },\n  created() {\n    if (this.$props.value?.toString()?.length > 0) {\n      this.selectValue = this.$props.value.toString();\n    }\n    this.where_ = this.$props.where;\n    this.FetchDataList();\n  },\n  methods: {\n    async Reload(where) {\n      var searchWhere = {};\n      if (where) {\n        searchWhere = Object.assign(searchWhere, where);\n      }\n      this.searchWhere = searchWhere;\n      this.FetchDataList(searchWhere);\n    },\n    async FetchDataList(searchWhere = {}) {\n      this.loading = true;\n      let {\n        Data: {\n          Items\n        }\n      } = await this.$Post(this.$props.url, {\n        Limit: 999,\n        ...this.where_,\n        ...searchWhere\n      });\n      this.loading = false;\n      let dataList = [];\n      Items.forEach((item, index) => {\n        if (this.filterValue.find(x => x == item[`${this.columnValue}`]?.toString()) == null) {\n          dataList.push({\n            name: item[`${this.columnName}`],\n            value: item[`${this.columnValue}`]?.toString(),\n            label: item[`${this.columnLabel}`]?.toString()\n          });\n        }\n      });\n      if (this.filterValue.filter(x => x.toString() == this.selectValue).length > 0) {\n        this.selectValue = undefined;\n      }\n      this.options = dataList;\n    },\n    Change(value) {\n      this.$emit('input', value);\n      this.$emit(\"Change\", value);\n    }\n  }\n};","map":{"version":3,"names":["store","props","value","type","Number","String","default","url","columnName","columnValue","columnLabel","where","filterValue","Array","disabled","Boolean","watch","immediate","handler","n","o","toString","length","selectValue","data","loading","options","where_","searchWhere","undefined","created","$props","FetchDataList","methods","Reload","Object","assign","Data","Items","$Post","Limit","dataList","forEach","item","index","find","x","push","name","label","filter","Change","$emit"],"sources":["src/components/Select/SigleSelect.vue"],"sourcesContent":["<template>\n    <el-select style=\"width: 100%;\" :disabled=\"disabled\" v-model=\"selectValue\" filterable placeholder=\"请选择\"\n        :filterable=\"true\" :loading=\"loading\" :clearable=\"true\" :remote=\"true\" @change=\"Change\">\n        <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.name\" :value=\"item.value\">\n            <span style=\"float: left\">{{ item.name }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 14px\">{{ item.label }}</span>\n        </el-option>\n    </el-select>\n</template>\n\n<script>\nimport store from \"@/store\";\nexport default {\n\n    props: {\n\n        value: {\n            type: [Number, String],\n            default: ''\n        },\n        url: {\n            type: String, //默认的请求路径\n            default: \"\",\n        },\n        columnName: {\n            type: String, //需要绑定Name的值\n            default: \"\",\n        },\n        columnValue: {\n            type: String, //需要绑定Value的值\n            default: \"\",\n        },\n        columnLabel: {\n            type: String, //需要绑定Label的值\n            default: \"\",\n        },\n        where: {},\n        filterValue: {\n            type: Array, //需要绑定Value的值\n            default: () => []\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        },\n\n\n    },\n    watch: {\n        \"value\": {\n            immediate: true, //该回调将会在侦听开始之后被立即调用\n            handler: function (n, o) {\n                if (n?.toString()?.length > 0) {\n                    this.selectValue = n.toString();\n                }\n                else {\n                    this.selectValue = n;\n                }\n            }\n        }\n    },\n    data() {\n        return {\n            loading: false, //是否正在获取数据中\n            options: [],\n            where_: {},//默认\n            searchWhere: {},//搜索带过来的条件\n            selectValue: undefined,\n\n        }\n    },\n    created() {\n\n\n        if (this.$props.value?.toString()?.length > 0) {\n            this.selectValue = this.$props.value.toString();\n        }\n        this.where_ = this.$props.where;\n        this.FetchDataList();\n\n    },\n    methods: {\n\n        async Reload(where) {\n\n            var searchWhere = {};\n            if (where) {\n                searchWhere = Object.assign(searchWhere, where);\n            }\n            this.searchWhere = searchWhere;\n            this.FetchDataList(searchWhere);\n        },\n        async FetchDataList(searchWhere = {}) {\n            this.loading = true;\n            let {\n                Data: {\n                    Items,\n\n                }\n            } = await this.$Post(this.$props.url, {\n                Limit: 999,\n                ...this.where_,\n                ...searchWhere\n            });\n            this.loading = false;\n            let dataList = [];\n            Items.forEach((item, index) => {\n                if (this.filterValue.find(x => x == item[`${this.columnValue}`]?.toString()) == null) {\n                    dataList.push({\n                        name: item[`${this.columnName}`],\n                        value: item[`${this.columnValue}`]?.toString(),\n                        label: item[`${this.columnLabel}`]?.toString(),\n                    });\n\n                }\n\n            });\n\n            if (this.filterValue.filter(x => x.toString() == this.selectValue).length > 0) {\n                this.selectValue = undefined;\n            }\n\n            this.options = dataList;\n        },\n\n        Change(value) {\n            this.$emit('input', value);\n            this.$emit(\"Change\", value);\n        },\n\n    }\n}\n\n</script>\n"],"mappings":";AAWA,OAAAA,KAAA;AACA;EAEAC,KAAA;IAEAC,KAAA;MACAC,IAAA,GAAAC,MAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,GAAA;MACAJ,IAAA,EAAAE,MAAA;MAAA;MACAC,OAAA;IACA;IACAE,UAAA;MACAL,IAAA,EAAAE,MAAA;MAAA;MACAC,OAAA;IACA;IACAG,WAAA;MACAN,IAAA,EAAAE,MAAA;MAAA;MACAC,OAAA;IACA;IACAI,WAAA;MACAP,IAAA,EAAAE,MAAA;MAAA;MACAC,OAAA;IACA;IACAK,KAAA;IACAC,WAAA;MACAT,IAAA,EAAAU,KAAA;MAAA;MACAP,OAAA,EAAAA,CAAA;IACA;IACAQ,QAAA;MACAX,IAAA,EAAAY,OAAA;MACAT,OAAA;IACA;EAGA;EACAU,KAAA;IACA;MACAC,SAAA;MAAA;MACAC,OAAA,WAAAA,CAAAC,CAAA,EAAAC,CAAA;QACA,IAAAD,CAAA,EAAAE,QAAA,IAAAC,MAAA;UACA,KAAAC,WAAA,GAAAJ,CAAA,CAAAE,QAAA;QACA,OACA;UACA,KAAAE,WAAA,GAAAJ,CAAA;QACA;MACA;IACA;EACA;EACAK,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,OAAA;MACAC,MAAA;MAAA;MACAC,WAAA;MAAA;MACAL,WAAA,EAAAM;IAEA;EACA;EACAC,QAAA;IAGA,SAAAC,MAAA,CAAA7B,KAAA,EAAAmB,QAAA,IAAAC,MAAA;MACA,KAAAC,WAAA,QAAAQ,MAAA,CAAA7B,KAAA,CAAAmB,QAAA;IACA;IACA,KAAAM,MAAA,QAAAI,MAAA,CAAApB,KAAA;IACA,KAAAqB,aAAA;EAEA;EACAC,OAAA;IAEA,MAAAC,OAAAvB,KAAA;MAEA,IAAAiB,WAAA;MACA,IAAAjB,KAAA;QACAiB,WAAA,GAAAO,MAAA,CAAAC,MAAA,CAAAR,WAAA,EAAAjB,KAAA;MACA;MACA,KAAAiB,WAAA,GAAAA,WAAA;MACA,KAAAI,aAAA,CAAAJ,WAAA;IACA;IACA,MAAAI,cAAAJ,WAAA;MACA,KAAAH,OAAA;MACA;QACAY,IAAA;UACAC;QAEA;MACA,eAAAC,KAAA,MAAAR,MAAA,CAAAxB,GAAA;QACAiC,KAAA;QACA,QAAAb,MAAA;QACA,GAAAC;MACA;MACA,KAAAH,OAAA;MACA,IAAAgB,QAAA;MACAH,KAAA,CAAAI,OAAA,EAAAC,IAAA,EAAAC,KAAA;QACA,SAAAhC,WAAA,CAAAiC,IAAA,CAAAC,CAAA,IAAAA,CAAA,IAAAH,IAAA,SAAAlC,WAAA,KAAAY,QAAA;UACAoB,QAAA,CAAAM,IAAA;YACAC,IAAA,EAAAL,IAAA,SAAAnC,UAAA;YACAN,KAAA,EAAAyC,IAAA,SAAAlC,WAAA,KAAAY,QAAA;YACA4B,KAAA,EAAAN,IAAA,SAAAjC,WAAA,KAAAW,QAAA;UACA;QAEA;MAEA;MAEA,SAAAT,WAAA,CAAAsC,MAAA,CAAAJ,CAAA,IAAAA,CAAA,CAAAzB,QAAA,WAAAE,WAAA,EAAAD,MAAA;QACA,KAAAC,WAAA,GAAAM,SAAA;MACA;MAEA,KAAAH,OAAA,GAAAe,QAAA;IACA;IAEAU,OAAAjD,KAAA;MACA,KAAAkD,KAAA,UAAAlD,KAAA;MACA,KAAAkD,KAAA,WAAAlD,KAAA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}