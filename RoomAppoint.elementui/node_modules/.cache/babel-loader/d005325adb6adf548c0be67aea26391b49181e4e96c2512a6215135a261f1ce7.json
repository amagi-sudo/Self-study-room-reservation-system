{"ast":null,"code":"import store from \"@/store/index.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  computed: {\n    ...mapGetters([\"UserInfo\", 'UserId'])\n  },\n  data() {\n    return {\n      editShow: false,\n      formData: {},\n      rules: {\n        UserName: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        Password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }],\n        Email: [{\n          required: true,\n          message: '请输入邮箱',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            var reg = /^[\\w-]+(\\.[\\w-]+)*@[\\w-]+(\\.[\\w-]+)+$/;\n            if (!value || !reg.test(value)) {\n              callback(new Error('请输入正确邮箱'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }],\n        Name: [{\n          required: true,\n          message: '请输入名称',\n          trigger: 'blur'\n        }],\n        PhoneNumber: [{\n          required: true,\n          message: '请输入手机号码',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            var reg = /^1[34578]\\d{9}$/;\n            if (!value || !reg.test(value)) {\n              callback(new Error('请输入正确的手机号'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }],\n        Birth: [{\n          required: true,\n          message: '请输入出生年月',\n          trigger: 'blur'\n        }],\n        ImageUrls: [{\n          required: true,\n          message: '请输入头像',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.ShowEditModal();\n  },\n  methods: {\n    //获取用户信息\n    async ShowEditModal() {\n      let {\n        Data\n      } = await this.$Post(\"/User/Get\", {\n        Id: this.UserId\n      });\n      this.formData = Data;\n      this.editShow = true;\n    },\n    //创建或者修改\n    async CreateOrEdit() {\n      this.$refs.editModalForm.validate(async valid => {\n        if (valid) {\n          //保存数据到数据库\n          let {\n            Success,\n            Msg,\n            Data\n          } = await this.$Post(\"/User/CreateOrEdit\", this.formData);\n          if (Success) {\n            this.$message.success(\"修改成功!\");\n            store.dispatch(\"GetInfo\");\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["store","mapGetters","computed","data","editShow","formData","rules","UserName","required","message","trigger","Password","Email","validator","rule","value","callback","reg","test","Error","Name","PhoneNumber","Birth","ImageUrls","created","ShowEditModal","methods","Data","$Post","Id","UserId","CreateOrEdit","$refs","editModalForm","validate","valid","Success","Msg","$message","success","dispatch","console","log"],"sources":["src/views/Admin/UserPerson.vue"],"sourcesContent":["<template>\n  <div>\n    <el-page-header class=\"Card margin-top-lg\" @back=\"goBack\" content=\"确定选座\">\n    </el-page-header>\n    <el-card class=\"margin-top-sm\">\n      <div slot=\"header\" class=\"clearfix\">\n        <h2>修改个人信息</h2>\n      </div>\n      <div>\n        <el-form ref=\"editModalForm\" v-if=\"editShow == true\" :model=\"formData\" label-width=\"80px\" size=\"mini\"\n          :rules=\"rules\">\n          <el-form-item label=\"账号\" prop=\"UserName\">\n            <el-input v-model=\"formData.UserName\" clearable :disabled=\"true\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"邮箱\" prop=\"Email\">\n            <el-input v-model=\"formData.Email\" clearable> </el-input>\n          </el-form-item>\n          <el-form-item label=\"名称\" prop=\"Name\">\n            <el-input v-model=\"formData.Name\" clearable></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机号码\" prop=\"PhoneNumber\">\n            <el-input v-model=\"formData.PhoneNumber\" clearable></el-input>\n          </el-form-item>\n          <el-form-item label=\"头像\" prop=\"ImageUrls\">\n            <UploadImages v-model=\"formData.ImageUrls\"></UploadImages>\n          </el-form-item>\n\n          <el-form-item label=\"出生年月\" prop=\"Birth\">\n            <el-date-picker type=\"date\" value-format=\"yyyy-MM-dd 00:00:00\" placeholder=\"选择日期\" v-model=\"formData.Birth\"\n              clearable></el-date-picker>\n          </el-form-item>\n\n\n\n        </el-form>\n        <div style=\"display: flex;justify-content: flex-end;\">\n          <el-button type=\"primary\" @click=\"CreateOrEdit\">确 定</el-button>\n        </div>\n      </div>\n    </el-card>\n\n  </div>\n</template>\n\n<script>\nimport store from \"@/store/index.js\"\nimport { mapGetters } from \"vuex\";\nexport default {\n\n  computed: {\n    ...mapGetters([\"UserInfo\", 'UserId'])\n  },\n  data() {\n    return {\n      editShow: false,\n      formData: {},\n      rules: {\n        UserName: [\n          { required: true, message: '请输入账号', trigger: 'blur' },\n        ],\n        Password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ],\n        Email: [\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\n          {\n            validator: (rule, value, callback) => {\n              var reg = /^[\\w-]+(\\.[\\w-]+)*@[\\w-]+(\\.[\\w-]+)+$/;\n              if (!value || !reg.test(value)) {\n                callback(new Error('请输入正确邮箱'));\n              }\n              else {\n                callback();\n              }\n            }, trigger: 'blur'\n          },\n        ],\n        Name: [\n          { required: true, message: '请输入名称', trigger: 'blur' },\n        ],\n        PhoneNumber: [\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\n          {\n            validator: (rule, value, callback) => {\n              var reg = /^1[34578]\\d{9}$/;\n              if (!value || !reg.test(value)) {\n                callback(new Error('请输入正确的手机号'));\n              }\n              else {\n                callback();\n              }\n            }, trigger: 'blur'\n          },\n        ],\n        Birth: [\n          { required: true, message: '请输入出生年月', trigger: 'blur' },\n        ],\n        ImageUrls: [\n          { required: true, message: '请输入头像', trigger: 'blur' },\n        ],\n      },\n\n    }\n  },\n  created() {\n    this.ShowEditModal();\n  },\n  methods: {\n\n    //获取用户信息\n    async ShowEditModal() {\n\n      let { Data } = await this.$Post(\"/User/Get\", { Id: this.UserId })\n      this.formData = Data;\n      this.editShow = true;\n\n    },\n    //创建或者修改\n    async CreateOrEdit() {\n      this.$refs.editModalForm.validate(async (valid) => {\n        if (valid) {\n          //保存数据到数据库\n          let { Success, Msg, Data } = await this.$Post(\"/User/CreateOrEdit\", this.formData);\n          if (Success) {\n\n            this.$message.success(\"修改成功!\");\n\n            store.dispatch(\"GetInfo\");\n\n\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n\n  }\n}\n</script>\n\n<style></style>"],"mappings":"AA8CA,OAAAA,KAAA;AACA,SAAAC,UAAA;AACA;EAEAC,QAAA;IACA,GAAAD,UAAA;EACA;EACAE,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,KAAA;QACAC,QAAA,GACA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAC,QAAA,GACA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAE,KAAA,GACA;UAAAJ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAG,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,IAAAC,GAAA;YACA,KAAAF,KAAA,KAAAE,GAAA,CAAAC,IAAA,CAAAH,KAAA;cACAC,QAAA,KAAAG,KAAA;YACA,OACA;cACAH,QAAA;YACA;UACA;UAAAN,OAAA;QACA,EACA;QACAU,IAAA,GACA;UAAAZ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAW,WAAA,GACA;UAAAb,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAG,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,IAAAC,GAAA;YACA,KAAAF,KAAA,KAAAE,GAAA,CAAAC,IAAA,CAAAH,KAAA;cACAC,QAAA,KAAAG,KAAA;YACA,OACA;cACAH,QAAA;YACA;UACA;UAAAN,OAAA;QACA,EACA;QACAY,KAAA,GACA;UAAAd,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAa,SAAA,GACA;UAAAf,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IAEA;EACA;EACAc,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IAEA;IACA,MAAAD,cAAA;MAEA;QAAAE;MAAA,eAAAC,KAAA;QAAAC,EAAA,OAAAC;MAAA;MACA,KAAAzB,QAAA,GAAAsB,IAAA;MACA,KAAAvB,QAAA;IAEA;IACA;IACA,MAAA2B,aAAA;MACA,KAAAC,KAAA,CAAAC,aAAA,CAAAC,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA;YAAAC,OAAA;YAAAC,GAAA;YAAAV;UAAA,eAAAC,KAAA,4BAAAvB,QAAA;UACA,IAAA+B,OAAA;YAEA,KAAAE,QAAA,CAAAC,OAAA;YAEAvC,KAAA,CAAAwC,QAAA;UAGA;QACA;UACAC,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}