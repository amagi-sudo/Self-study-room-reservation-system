{"ast":null,"code":"import store from '@/store';\nexport default {\n  name: \"UserList\",\n  data() {\n    return {\n      searchForm: {},\n      editorShow: false,\n      dataColum: [{\n        key: \"Id\",\n        hidden: true\n      }, {\n        key: \"UserName\",\n        title: \"账号\",\n        type: store.getters.ColumnType.SHORTTEXT\n      }, {\n        key: \"Password\",\n        title: \"密码\",\n        type: store.getters.ColumnType.SHORTTEXT\n      }, {\n        key: \"Email\",\n        title: \"邮箱\",\n        type: store.getters.ColumnType.SHORTTEXT\n      }, {\n        key: \"ImageUrls\",\n        title: \"头像\",\n        type: store.getters.ColumnType.IMAGES\n      }, {\n        key: \"PhoneNumber\",\n        title: \"手机号\",\n        type: store.getters.ColumnType.PHONE\n      }, {\n        key: \"Birth\",\n        title: \"出生年月\",\n        type: store.getters.ColumnType.DATE\n      }, {\n        key: \"RoleTypeFormat\",\n        title: \"所属角色\",\n        type: store.getters.ColumnType.SHORTTEXT\n      }, {\n        title: \"操作\",\n        width: \"300px\",\n        key: \"Operate\",\n        type: store.getters.ColumnType.USERDEFINED\n      }],\n      formData: {},\n      editModalFormRules: {\n        \"UserName\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"Password\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"Email\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"ImageUrls\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"Name\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"PhoneNumber\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            var reg = /^1[34578]\\d{9}$/;\n            if (!value || !reg.test(value)) {\n              callback(new Error('请输入正确的手机号'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }],\n        \"Birth\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"RoleType\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }]\n      },\n      listLoading: false\n    };\n  },\n  created() {},\n  methods: {\n    /**\r\n    * 点击新增或者编辑的时候会触发\r\n    */\n    async ShowEditModal(Id) {\n      let {\n        Data\n      } = await this.$Post(`/User/Get`, {\n        Id: Id\n      });\n      this.formData = Data;\n      this.editorShow = true;\n    },\n    /**\r\n    * 点击保存的时候会触发\r\n    */\n    async CreateOrEditForm() {\n      this.$refs.editModalForm.validate(async valid => {\n        if (valid) {\n          var {\n            Success\n          } = await this.$Post(`/User/CreateOrEdit`, this.formData);\n          if (Success) {\n            this.editorShow = false;\n            this.$refs.PaginationTableId.Reload(this.searchForm);\n          }\n        }\n      });\n    },\n    async SearchClick() {\n      this.$refs.PaginationTableId.Reload(this.searchForm);\n    },\n    /**\r\n    * 点击清空表单会触发\r\n    */\n    async ResetClick() {\n      this.searchForm = {};\n      this.$refs.PaginationTableId.Reload(this.searchForm);\n    },\n    /**\r\n    * 单个删除的时候会触发\r\n    */\n    async ShowDeleteModal(Id) {\n      await this.$PostDelete(`/User/Delete`, {\n        Id: Id\n      });\n      this.$refs.PaginationTableId.Reload(this.searchForm);\n    }\n  }\n};","map":{"version":3,"names":["store","name","data","searchForm","editorShow","dataColum","key","hidden","title","type","getters","ColumnType","SHORTTEXT","IMAGES","PHONE","DATE","width","USERDEFINED","formData","editModalFormRules","required","message","trigger","validator","rule","value","callback","reg","test","Error","listLoading","created","methods","ShowEditModal","Id","Data","$Post","CreateOrEditForm","$refs","editModalForm","validate","valid","Success","PaginationTableId","Reload","SearchClick","ResetClick","ShowDeleteModal","$PostDelete"],"sources":["src/views/Admin/UserList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n\r\n        <el-row>\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"SearchClick\">查询</el-button>\r\n          <el-button type=\"warning\" size=\"mini\" @click=\"ResetClick\">清空条件</el-button>\r\n\r\n        </el-row>\r\n      </div>\r\n      <div>\r\n        <el-form :inline=\"true\" :model=\"searchForm\" class=\"demo-form-inline\">\r\n          <el-form-item label=\"姓名\">\r\n            <el-input v-model=\"searchForm.Name\" placeholder=\"请输入姓名\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\">\r\n            <el-input v-model=\"searchForm.Eamil\" placeholder=\"请输入邮箱\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"手机号码\">\r\n            <el-input v-model=\"searchForm.PhoneNumber\" placeholder=\"请输入手机号码\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n    <PaginationTable ref=\"PaginationTableId\" url=\"/User/List\" :column=\"dataColum\">\r\n      <template v-slot:header>\r\n        <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\" @click=\"ShowEditModal()\">新 增</el-button>\r\n        <ExportButton exportUrl=\"/User/Export\" :where=\"searchForm\"></ExportButton>\r\n\r\n      </template>\r\n      <template v-slot:Operate=\"scope\">\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"ShowEditModal(scope.row.Id)\">修 改</el-button>\r\n        <el-button type=\"danger\" size=\"mini\" @click=\"ShowDeleteModal(scope.row.Id)\">删 除</el-button>\r\n\r\n      </template>\r\n    </PaginationTable>\r\n\r\n\r\n    <el-dialog :title=\"formData.Id ? '修改用户' : '添加用户'\" :visible.sync=\"editorShow\" width=\"80%\" :lock-scroll=\"true\"\r\n      min-height=\"800px\">\r\n      <el-form v-if=\"editorShow == true\" ref=\"editModalForm\" :rules=\"editModalFormRules\" :model=\"formData\"\r\n        label-width=\"140px\" size=\"mini\">\r\n\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"账号\" prop=\"UserName\" placeholder=\"请输入账号\">\r\n              <el-input v-model.trim=\"formData.UserName\" :disabled='formData.Id != null'></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"密码\" prop=\"Password\">\r\n              <el-input type=\"password\" v-model.trim=\"formData.Password\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"角色\" prop=\"RoleType\">\r\n              <SigleSelect v-model=\"formData.RoleType\" url=\"/Select/RoleType\" columnName=\"Name\" columnValue=\"Code\"\r\n                columnLabel=\"Label\"></SigleSelect>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"邮箱\" prop=\"Email\" placeholder=\"请输入邮箱\">\r\n              <el-input v-model.trim=\"formData.Email\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"联系方式\" prop=\"PhoneNumber\" placeholder=\"请输入联系方式\">\r\n              <el-input v-model.trim=\"formData.PhoneNumber\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"出生时间\" prop=\"Birth\" placeholder=\"请输入出生时间\">\r\n              <el-date-picker v-model=\"formData.Birth\" align=\"right\" type=\"date\" placeholder=\"选择出生时间\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"姓名\" prop=\"Name\" placeholder=\"请输入姓名\">\r\n              <el-input v-model.trim=\"formData.Name\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"图片\" prop=\"ImageUrls\">\r\n              <UploadImages :limit=\"1\" v-model=\"formData.ImageUrls\"></UploadImages>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row type=\"flex\" justify=\"end\" align=\"bottom\">\r\n          <el-form-item>\r\n            <el-button type=\"primary\" plain @click=\"CreateOrEditForm()\">确 定</el-button>\r\n            <el-button @click=\"editorShow = false\">取 消</el-button>\r\n          </el-form-item>\r\n        </el-row>\r\n      </el-form>\r\n\r\n    </el-dialog>\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport store from '@/store';\r\nexport default {\r\n  name: \"UserList\",\r\n  data() {\r\n    return {\r\n      searchForm: {},\r\n      editorShow: false,\r\n      dataColum: [\r\n        {\r\n          key: \"Id\",\r\n          hidden: true,\r\n\r\n        },\r\n        {\r\n          key: \"UserName\",\r\n          title: \"账号\",\r\n          type: store.getters.ColumnType.SHORTTEXT,\r\n\r\n        },\r\n\r\n        {\r\n          key: \"Password\",\r\n          title: \"密码\",\r\n          type: store.getters.ColumnType.SHORTTEXT,\r\n\r\n        },\r\n        {\r\n          key: \"Email\",\r\n          title: \"邮箱\",\r\n          type: store.getters.ColumnType.SHORTTEXT,\r\n\r\n        },\r\n        {\r\n          key: \"ImageUrls\",\r\n          title: \"头像\",\r\n          type: store.getters.ColumnType.IMAGES,\r\n\r\n        },\r\n\r\n        {\r\n          key: \"PhoneNumber\",\r\n          title: \"手机号\",\r\n          type: store.getters.ColumnType.PHONE,\r\n\r\n        },\r\n        {\r\n          key: \"Birth\",\r\n          title: \"出生年月\",\r\n          type: store.getters.ColumnType.DATE,\r\n\r\n        },\r\n        {\r\n          key: \"RoleTypeFormat\",\r\n          title: \"所属角色\",\r\n          type: store.getters.ColumnType.SHORTTEXT,\r\n\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          width: \"300px\",\r\n          key: \"Operate\",\r\n          type: store.getters.ColumnType.USERDEFINED,\r\n        },\r\n      ],\r\n      formData: {\r\n      },\r\n      editModalFormRules: {\r\n        \"UserName\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n        \"Password\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n        \"Email\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n        \"ImageUrls\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n        \"Name\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n\r\n        \"PhoneNumber\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              var reg = /^1[34578]\\d{9}$/;\r\n              if (!value || !reg.test(value)) {\r\n                callback(new Error('请输入正确的手机号'));\r\n              }\r\n              else {\r\n                callback();\r\n              }\r\n            }, trigger: 'blur'\r\n          },\r\n        ],\r\n        \"Birth\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n        \"RoleType\": [\r\n          { required: true, message: '该项为必填项', trigger: 'blur' },\r\n        ],\r\n\r\n      },\r\n\r\n      listLoading: false,\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  methods: {\r\n    /**\r\n    * 点击新增或者编辑的时候会触发\r\n    */\r\n    async ShowEditModal(Id) {\r\n\r\n      let { Data } = await this.$Post(`/User/Get`, { Id: Id });\r\n      this.formData = Data;\r\n      this.editorShow = true;\r\n\r\n    },\r\n\r\n    /**\r\n   * 点击保存的时候会触发\r\n   */\r\n    async CreateOrEditForm() {\r\n\r\n      this.$refs.editModalForm.validate(async valid => {\r\n        if (valid) {\r\n          var { Success } = await this.$Post(`/User/CreateOrEdit`, this.formData);\r\n          if (Success) {\r\n            this.editorShow = false;\r\n            this.$refs.PaginationTableId.Reload(this.searchForm);\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    async SearchClick() {\r\n      this.$refs.PaginationTableId.Reload(this.searchForm);\r\n    },\r\n    /**\r\n   * 点击清空表单会触发\r\n   */\r\n    async ResetClick() {\r\n      this.searchForm = {};\r\n      this.$refs.PaginationTableId.Reload(this.searchForm);\r\n    },\r\n    /**\r\n   * 单个删除的时候会触发\r\n   */\r\n    async ShowDeleteModal(Id) {\r\n      await this.$PostDelete(`/User/Delete`, { Id: Id });\r\n      this.$refs.PaginationTableId.Reload(this.searchForm);\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}