{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { adminRouters } from \"@/router/index\";\nimport { computed, onMounted, reactive, toRefs } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: 'Layout',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const state = reactive({\n      routerMenu: [],\n      breadList: []\n    });\n    const UserInfo = computed(() => store.getters.UserInfo);\n    const Token = computed(() => store.getters.Token);\n    onMounted(() => {\n      state.routerMenu = adminRouters;\n      getBreadcrumb();\n    });\n    const getBreadcrumb = () => {\n      let matched = router.currentRoute.value.matched;\n      if (!isHome(matched[0])) {\n        matched = [{\n          path: \"/Admin\",\n          meta: {\n            title: \"控制台\"\n          }\n        }].concat(matched);\n      }\n      state.breadList = matched;\n    };\n    const isHome = route => {\n      return route.path === \"/Admin\";\n    };\n    const LoginOut = async () => {\n      console.log(\"点击退出\");\n      await store.dispatch('Logout');\n      router.push(`/Login`);\n    };\n    router.beforeEach((to, from, next) => {\n      getBreadcrumb();\n      next();\n    });\n    return {\n      ...toRefs(state),\n      UserInfo,\n      Token,\n      LoginOut\n    };\n  }\n};","map":{"version":3,"names":["adminRouters","computed","onMounted","reactive","toRefs","useStore","useRouter","name","setup","store","router","state","routerMenu","breadList","UserInfo","getters","Token","getBreadcrumb","matched","currentRoute","value","isHome","path","meta","title","concat","route","LoginOut","console","log","dispatch","push","beforeEach","to","from","next"],"sources":["src/views/Admin/Layout/index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-container style=\"height: 100vh\">\n      <!-- 头部 -->\n      <el-header>\n        <div class=\"bg-header\">\n          <div>\n            <span style=\"font-size: 24px; color: white; font-weight: bold;\">诚凛自习室管理端</span>\n          </div>\n          <div style=\"display: flex; align-items: center;\">\n            <el-avatar :size=\"60\" :src=\"UserInfo.ImageUrls\" size=\"medium\">\n              <img src=\"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png\" />\n            </el-avatar>\n            <el-dropdown style=\"margin-left: 10px;\">\n              <span class=\"el-dropdown-link\" style=\"color: white;\">\n                {{ UserInfo.Name }}<i class=\"el-icon-arrow-down el-icon--right\"></i>\n              </span>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item>\n                  <RouterLink :to=\"{ path: '/Admin/UserPerson' }\">个人信息</RouterLink>\n                </el-dropdown-item>\n                <el-dropdown-item>\n                  <RouterLink :to=\"{ path: '/Admin/PasswordEdit' }\">修改密码</RouterLink>\n                </el-dropdown-item>\n                <el-dropdown-item>\n                  <div @click=\"LoginOut()\">退出</div>\n                </el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </div>\n        </div>\n      </el-header>\n\n      <!-- 主体 -->\n      <el-container>\n        <!-- 侧边栏 -->\n        <el-aside width=\"200px\">\n          <el-menu class=\"menu-list\" :router=\"true\" active-text-color=\"blue\">\n            <el-menu-item index=\"/Admin/Home\">\n              <i class=\"el-icon-shujufenxi\"></i>\n              <span>控制台</span>\n            </el-menu-item>\n            <el-submenu index=\"/Admin/UserList\">\n              <template slot=\"title\">\n                <i class=\"el-icon-s-home\"></i>\n                <span>用户管理</span>\n              </template>\n              <el-menu-item index=\"/Admin/UserList\">\n                <span>用户信息</span>\n              </el-menu-item>\n            </el-submenu>\n            <el-menu-item index=\"/Admin/RoomList\">\n              <i class=\"el-icon-AIzixishi\"></i>\n              <span>自习室</span>\n            </el-menu-item>\n            <el-menu-item index=\"/Admin/SeatList\">\n              <i class=\"el-icon-zuowei\"></i>\n              <span>座位</span>\n            </el-menu-item>\n            <el-menu-item index=\"/Admin/AppointRecordList\">\n              <i class=\"el-icon-yuyuejilu\"></i>\n              <span>预约记录</span>\n            </el-menu-item>\n            <el-menu-item index=\"/Admin/BannerList\">\n              <i class=\"el-icon-wenanfengmian\"></i>\n              <span>封面</span>\n            </el-menu-item>\n            <el-menu-item index=\"/Admin/IntegralList\">\n              <i class=\"el-icon-jifen\"></i>\n              <span>积分</span>\n            </el-menu-item>\n            <el-submenu index=\"/Admin/AppointRoomAppointStatusData\">\n              <template slot=\"title\">\n                <i class=\"el-icon-shujutongji\"></i>\n                <span>数据统计</span>\n              </template>\n              <el-menu-item index=\"/Admin/AppointRoomAppointStatusData\">\n                <span>预约状态分析</span>\n              </el-menu-item>\n              <el-menu-item index=\"/Admin/GetIntegralConsumeAndGainChart\">\n                <span>最近30天积分分析</span>\n              </el-menu-item>\n              <el-menu-item index=\"/Admin/GetAppointRoomRealTimeData\">\n                <span>统计实时在场人数</span>\n              </el-menu-item>\n            </el-submenu>\n          </el-menu>\n        </el-aside>\n\n        <!-- 主内容区域 -->\n        <el-main class=\"admin-main\">\n          <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"margin-bottom-lg\">\n            <el-breadcrumb-item v-for=\"(item, index) in breadList\" :key=\"index\" :to=\"item.path\">{{ item.meta.title\n              }}</el-breadcrumb-item>\n          </el-breadcrumb>\n\n          <transition>\n            <router-view></router-view>\n          </transition>\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport { adminRouters } from \"@/router/index\";\nimport { computed, onMounted, reactive, toRefs } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n  name: 'Layout',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const state = reactive({\n      routerMenu: [],\n      breadList: [],\n    });\n\n    const UserInfo = computed(() => store.getters.UserInfo);\n    const Token = computed(() => store.getters.Token);\n\n    onMounted(() => {\n      state.routerMenu = adminRouters;\n      getBreadcrumb();\n    });\n\n    const getBreadcrumb = () => {\n      let matched = router.currentRoute.value.matched;\n      if (!isHome(matched[0])) {\n        matched = [{ path: \"/Admin\", meta: { title: \"控制台\" } }].concat(matched);\n      }\n      state.breadList = matched;\n    };\n\n    const isHome = (route) => {\n      return route.path === \"/Admin\";\n    };\n\n    const LoginOut = async () => {\n      console.log(\"点击退出\");\n      await store.dispatch('Logout');\n      router.push(`/Login`);\n    };\n\n    router.beforeEach((to, from, next) => {\n      getBreadcrumb();\n      next();\n    });\n\n    return {\n      ...toRefs(state),\n      UserInfo,\n      Token,\n      LoginOut,\n    };\n  },\n};\n</script>\n\n<style>\n.el-header {\n  height: 60px;\n  line-height: 60px;\n  padding: 0;\n  border-bottom: 1px solid #ccc;\n  /* 添加底部边线 */\n  box-sizing: border-box;\n}\n\n.bg-header {\n  background-color: #1A2D6F;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n}\n\n.menu-list {\n  height: calc(100vh - 60px);\n}\n\n.el-submenu__title {\n  text-align: left;\n}\n\n.el-menu-item {\n  text-align: left;\n}\n\n.margin-bottom-lg {\n  margin-bottom: 20px;\n}\n\n.admin-main {\n  height: calc(100vh - 60px) !important;\n}\n</style>\n"],"mappings":";AA0GA,SAAAA,YAAA;AACA,SAAAC,QAAA,EAAAC,SAAA,EAAAC,QAAA,EAAAC,MAAA;AACA,SAAAC,QAAA;AACA,SAAAC,SAAA;AAEA;EACAC,IAAA;EACAC,MAAA;IACA,MAAAC,KAAA,GAAAJ,QAAA;IACA,MAAAK,MAAA,GAAAJ,SAAA;IACA,MAAAK,KAAA,GAAAR,QAAA;MACAS,UAAA;MACAC,SAAA;IACA;IAEA,MAAAC,QAAA,GAAAb,QAAA,OAAAQ,KAAA,CAAAM,OAAA,CAAAD,QAAA;IACA,MAAAE,KAAA,GAAAf,QAAA,OAAAQ,KAAA,CAAAM,OAAA,CAAAC,KAAA;IAEAd,SAAA;MACAS,KAAA,CAAAC,UAAA,GAAAZ,YAAA;MACAiB,aAAA;IACA;IAEA,MAAAA,aAAA,GAAAA,CAAA;MACA,IAAAC,OAAA,GAAAR,MAAA,CAAAS,YAAA,CAAAC,KAAA,CAAAF,OAAA;MACA,KAAAG,MAAA,CAAAH,OAAA;QACAA,OAAA;UAAAI,IAAA;UAAAC,IAAA;YAAAC,KAAA;UAAA;QAAA,GAAAC,MAAA,CAAAP,OAAA;MACA;MACAP,KAAA,CAAAE,SAAA,GAAAK,OAAA;IACA;IAEA,MAAAG,MAAA,GAAAK,KAAA;MACA,OAAAA,KAAA,CAAAJ,IAAA;IACA;IAEA,MAAAK,QAAA,SAAAA,CAAA;MACAC,OAAA,CAAAC,GAAA;MACA,MAAApB,KAAA,CAAAqB,QAAA;MACApB,MAAA,CAAAqB,IAAA;IACA;IAEArB,MAAA,CAAAsB,UAAA,EAAAC,EAAA,EAAAC,IAAA,EAAAC,IAAA;MACAlB,aAAA;MACAkB,IAAA;IACA;IAEA;MACA,GAAA/B,MAAA,CAAAO,KAAA;MACAG,QAAA;MACAE,KAAA;MACAW;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}