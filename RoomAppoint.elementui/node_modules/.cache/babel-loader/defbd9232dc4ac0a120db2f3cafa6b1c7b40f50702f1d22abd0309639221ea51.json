{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '@/store';\nimport { Message } from 'element-ui';\nimport { getToken, setToken, removeToken } from '@/utils/cache';\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\n\nVue.use(VueRouter);\nimport AdminLayout from \"@/views/Admin/Layout/index.vue\";\nimport FrontLayout from \"@/views/Front/Layout/index.vue\";\nconst routes = [{\n  path: \"/\",\n  component: () => import(\"@/components/HelloWorld.vue\")\n}, {\n  path: \"/Login\",\n  component: () => import(\"@/views/Login.vue\")\n}, {\n  path: \"/Register\",\n  component: () => import(\"@/views/Register.vue\")\n}];\nexport const adminRouters = [{\n  path: \"/Admin\",\n  redirect: \"/Admin/Home\",\n  component: AdminLayout,\n  meta: {\n    title: \"控制台\",\n    isAdmin: true\n  },\n  children: [{\n    path: \"/Admin/Home\",\n    meta: {\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/Home\")\n  }, {\n    path: \"/Admin/UserList\",\n    meta: {\n      title: \"用户信息\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/UserList\")\n  }, {\n    path: \"/Admin/UserPerson\",\n    meta: {\n      title: \"个人信息\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/UserPerson\")\n  }, {\n    path: \"/Admin/PasswordEdit\",\n    meta: {\n      title: \"修改密码\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/PasswordEdit\")\n  }, {\n    path: \"/Admin/AppointRecordList\",\n    meta: {\n      title: \"预约记录\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/AppointRecordList\")\n  }, {\n    path: \"/Admin/BannerList\",\n    meta: {\n      title: \"封面\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/BannerList\")\n  }, {\n    path: \"/Admin/IntegralList\",\n    meta: {\n      title: \"积分\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/IntegralList\")\n  }, {\n    path: \"/Admin/RoomList\",\n    meta: {\n      title: \"自习室\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/RoomList\")\n  }, {\n    path: \"/Admin/SeatList\",\n    meta: {\n      title: \"座位\",\n      isAdmin: true\n    },\n    component: () => import(\"@/views/Admin/SeatList\")\n  }]\n}];\nconst router = new VueRouter({\n  routes: [...routes, ...adminRouters] // (缩写) 相当于 routes: routes\n});\n\n// 编写导航路由\nrouter.beforeEach(async (to, from, next) => {\n  NProgress.start();\n  const hasToken = getToken();\n  console.log(hasToken);\n  if (hasToken) {\n    if (store.getters.HasUserInfo == false) {\n      await store.dispatch('GetInfo');\n    }\n    //如果去往的页面是后台\n    if (to.meta && to.meta.isAdmin) {\n      if (store.getters.RoleType == \"管理员\") {\n        next();\n      } else {\n        next({\n          path: \"/\"\n        });\n      }\n    } else {\n      if (store.getters.RoleType == \"管理员\") {\n        next({\n          path: \"/Admin\"\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    if (to.meta && to.meta.isAdmin) {\n      next({\n        path: \"/Login\"\n      });\n    } else {\n      next();\n    }\n  }\n  NProgress.done();\n});\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","store","Message","getToken","setToken","removeToken","NProgress","use","AdminLayout","FrontLayout","routes","path","component","adminRouters","redirect","meta","title","isAdmin","children","router","beforeEach","to","from","next","start","hasToken","console","log","getters","HasUserInfo","dispatch","RoleType","done","afterEach"],"sources":["D:/自习室预约系统/RoomAppoint.elementui/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport store from '@/store'\nimport { Message } from 'element-ui'\nimport { getToken, setToken, removeToken } from '@/utils/cache'\nimport NProgress from 'nprogress' // progress bar\nimport 'nprogress/nprogress.css' // progress bar style\n\nVue.use(VueRouter)\nimport AdminLayout from \"@/views/Admin/Layout/index.vue\"\nimport FrontLayout from \"@/views/Front/Layout/index.vue\"\n\nconst routes = [\n  {\n    path: \"/\", component: () => import(\"@/components/HelloWorld.vue\")\n  },\n  {\n    path: \"/Login\", component: () => import(\"@/views/Login.vue\")\n  },\n  {\n    path: \"/Register\", component: () => import(\"@/views/Register.vue\")\n  },\n\n]\nexport const adminRouters = [{\n  path: \"/Admin\",\n  redirect: \"/Admin/Home\",\n  component: AdminLayout,\n  meta: {\n    title: \"控制台\",\n    isAdmin: true,\n\n  },\n  children: [\n    {\n      path: \"/Admin/Home\",\n      meta: {\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/Home\")\n    },\n    {\n      path: \"/Admin/UserList\",\n      meta: {\n        title: \"用户信息\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/UserList\")\n    },\n    {\n      path: \"/Admin/UserPerson\",\n      meta: {\n        title: \"个人信息\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/UserPerson\")\n    },\n    {\n      path: \"/Admin/PasswordEdit\",\n      meta: {\n        title: \"修改密码\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/PasswordEdit\")\n    },\n\n    {\n      path: \"/Admin/AppointRecordList\",\n      meta: {\n        title: \"预约记录\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/AppointRecordList\")\n    },\n\n    {\n      path: \"/Admin/BannerList\",\n      meta: {\n        title: \"封面\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/BannerList\")\n    },\n\n    {\n      path: \"/Admin/IntegralList\",\n      meta: {\n        title: \"积分\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/IntegralList\")\n    },\n\n    {\n      path: \"/Admin/RoomList\",\n      meta: {\n        title: \"自习室\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/RoomList\")\n    },\n\n    {\n      path: \"/Admin/SeatList\",\n      meta: {\n        title: \"座位\",\n        isAdmin: true,\n      },\n      component: () => import(\"@/views/Admin/SeatList\")\n    },\n\n\n\n  ]\n\n},\n]\n\nconst router = new VueRouter({\n  routes: [...routes, ...adminRouters] // (缩写) 相当于 routes: routes\n})\n\n\n// 编写导航路由\nrouter.beforeEach(async (to, from, next) => {\n\n  NProgress.start()\n  const hasToken = getToken()\n  console.log(hasToken)\n  if (hasToken) {\n\n    if (store.getters.HasUserInfo == false) {\n      await store.dispatch('GetInfo');\n    }\n    //如果去往的页面是后台\n    if (to.meta && to.meta.isAdmin) {\n      if (store.getters.RoleType == \"管理员\") {\n        next()\n      }\n      else {\n        next({ path: \"/\" })\n      }\n    }\n    else {\n      if (store.getters.RoleType == \"管理员\") {\n        next({ path: \"/Admin\" })\n      }\n      else {\n        next()\n      }\n    }\n\n  }\n  else {\n    if (to.meta && to.meta.isAdmin) {\n      next({ path: \"/Login\" })\n    }\n    else {\n      next()\n    }\n  }\n  NProgress.done()\n\n})\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done()\n})\n\n\nexport default router;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}