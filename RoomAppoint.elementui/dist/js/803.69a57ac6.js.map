{"version":3,"file":"js/803.69a57ac6.js","mappings":"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","sources":["webpack://vue2/./src/components/Code/canvas.vue","webpack://vue2/src/components/Code/canvas.vue","webpack://vue2/./src/components/Code/canvas.vue?2961","webpack://vue2/./src/components/Code/canvas.vue?9560","webpack://vue2/./src/views/Login.vue","webpack://vue2/src/views/Login.vue","webpack://vue2/./src/views/Login.vue?3cb7","webpack://vue2/./src/views/Login.vue?a6ee"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"s-canvas\",on:{\"click\":_vm.refreshCode}},[_c('canvas',{attrs:{\"id\":\"s-canvas\",\"width\":_vm.contentWidth,\"height\":_vm.contentHeight}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"s-canvas\" @click=\"refreshCode\">\r\n        <canvas id=\"s-canvas\" :width=\"contentWidth\" :height=\"contentHeight\"></canvas>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'SIdentify',\r\n    props: {\r\n\r\n        fontSizeMin: {\r\n            type: Number,\r\n            default: 30\r\n        },\r\n        fontSizeMax: {\r\n            type: Number,\r\n            default: 40\r\n        },\r\n        backgroundColorMin: {\r\n            type: Number,\r\n            default: 180\r\n        },\r\n        backgroundColorMax: {\r\n            type: Number,\r\n            default: 240\r\n        },\r\n        colorMin: {\r\n            type: Number,\r\n            default: 50\r\n        },\r\n        colorMax: {\r\n            type: Number,\r\n            default: 160\r\n        },\r\n        lineColorMin: {\r\n            type: Number,\r\n            default: 40\r\n        },\r\n        lineColorMax: {\r\n            type: Number,\r\n            default: 180\r\n        },\r\n        dotColorMin: {\r\n            type: Number,\r\n            default: 0\r\n        },\r\n        dotColorMax: {\r\n            type: Number,\r\n            default: 255\r\n        },\r\n        contentWidth: {\r\n            type: Number,\r\n            default: 180\r\n        },\r\n        contentHeight: {\r\n            type: Number,\r\n            default: 40\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            identifyCode: \"\",\r\n            identifyCodes: '1234567890',\r\n        };\r\n    },\r\n    // watch: {\r\n    //     identifyCode() {\r\n    //         this.drawPic()\r\n    //     }\r\n    // },\r\n    mounted() {\r\n        this.makeCode(this.identifyCodes, 4);\r\n        this.drawPic()\r\n    },\r\n\r\n    methods: {\r\n        // 生成一个随机数\r\n        randomNum(min, max) {\r\n            return Math.floor(Math.random() * (max - min) + min)\r\n        },\r\n        // 生成一个随机的颜色\r\n        randomColor(min, max) {\r\n            let r = this.randomNum(min, max)\r\n            let g = this.randomNum(min, max)\r\n            let b = this.randomNum(min, max)\r\n            return 'rgb(' + r + ',' + g + ',' + b + ')'\r\n        },\r\n        drawPic() {\r\n            let canvas = document.getElementById('s-canvas')\r\n            let ctx = canvas.getContext('2d')\r\n            ctx.textBaseline = 'bottom'\r\n            // 绘制背景\r\n            ctx.fillStyle = this.randomColor(this.backgroundColorMin, this.backgroundColorMax)\r\n            ctx.fillRect(0, 0, this.contentWidth, this.contentHeight)\r\n            // 绘制文字\r\n            for (let i = 0; i < this.identifyCode.length; i++) {\r\n                this.drawText(ctx, this.identifyCode[i], i)\r\n            }\r\n            this.drawLine(ctx)\r\n            this.drawDot(ctx)\r\n        },\r\n        drawText(ctx, txt, i) {\r\n            ctx.fillStyle = this.randomColor(this.colorMin, this.colorMax)\r\n            ctx.font = this.randomNum(this.fontSizeMin, this.fontSizeMax) + 'px SimHei'\r\n            let x = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1))\r\n            let y = this.randomNum(this.fontSizeMax, this.contentHeight - 5)\r\n            var deg = this.randomNum(-45, 45)\r\n            // 修改坐标原点和旋转角度\r\n            ctx.translate(x, y)\r\n            ctx.rotate(deg * Math.PI / 180)\r\n            ctx.fillText(txt, 0, 0)\r\n            // 恢复坐标原点和旋转角度\r\n            ctx.rotate(-deg * Math.PI / 180)\r\n            ctx.translate(-x, -y)\r\n        },\r\n        drawLine(ctx) {\r\n            // 绘制干扰线\r\n            for (let i = 0; i < 8; i++) {\r\n                ctx.strokeStyle = this.randomColor(this.lineColorMin, this.lineColorMax)\r\n                ctx.beginPath()\r\n                ctx.moveTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))\r\n                ctx.lineTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))\r\n                ctx.stroke()\r\n            }\r\n        },\r\n        drawDot(ctx) {\r\n            // 绘制干扰点\r\n            for (let i = 0; i < 100; i++) {\r\n                ctx.fillStyle = this.randomColor(0, 255)\r\n                ctx.beginPath()\r\n                ctx.arc(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight), 1, 0, 2 * Math.PI)\r\n                ctx.fill()\r\n            }\r\n        },\r\n        // 切换验证码\r\n        refreshCode() {\r\n\r\n            this.identifyCode = ''\r\n            this.makeCode(this.identifyCodes, 4)\r\n            this.drawPic()\r\n        },\r\n        randomNum(min, max) {\r\n            return Math.floor(Math.random() * (max - min) + min)\r\n        },\r\n        makeCode(o, l) {\r\n            for (let i = 0; i < l; i++) {\r\n                this.identifyCode += this.identifyCodes[\r\n                    this.randomNum(0, this.identifyCodes.length)]\r\n            }\r\n        },\r\n        getCode() {\r\n            return this.identifyCode;\r\n        },\r\n\r\n\r\n    },\r\n\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./canvas.vue?vue&type=template&id=3b00ef78\"\nimport script from \"./canvas.vue?vue&type=script&lang=js\"\nexport * from \"./canvas.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticStyle:{\"height\":\"100vh\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"center\",\"background-color\":\"grey\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"background-color\":\"white\",\"padding\":\"20px\",\"border-radius\":\"10px\"}},[_vm._m(0),_c('div',{staticStyle:{\"flex\":\"1\",\"margin-left\":\"35px\",\"display\":\"flex\",\"flex-direction\":\"column\",\"justify-content\":\"space-between\"}},[_c('div',{staticStyle:{\"width\":\"500px\"}},[_c('h2',[_vm._v(\"欢迎您~来到诚凛自习室预约系统\")]),_c('el-form',{ref:\"loginForm\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"model\":_vm.formData,\"label-width\":\"70px\",\"label-position\":\"left\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"UserName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.formData.UserName),callback:function ($$v) {_vm.$set(_vm.formData, \"UserName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.UserName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"Password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.formData.Password),callback:function ($$v) {_vm.$set(_vm.formData, \"Password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.Password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\",\"prop\":\"RoleType\"}},[_c('el-radio-group',{model:{value:(_vm.formData.RoleType),callback:function ($$v) {_vm.$set(_vm.formData, \"RoleType\", $$v)},expression:\"formData.RoleType\"}},_vm._l((_vm.roleOptions),function(item,index){return _c('el-radio',{key:item.Code,attrs:{\"label\":item.Code}},[_vm._v(_vm._s(item.Label))])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"验证码\",\"prop\":\"Code\"}},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('el-input',{attrs:{\"text\":\"Code\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.formData.Code),callback:function ($$v) {_vm.$set(_vm.formData, \"Code\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.Code\"}}),_c('div',{staticStyle:{\"margin-left\":\"10px\"}},[_c('ValidCode',{ref:\"ValidCode\"})],1)],1)]),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.LoginBtn}},[_vm._v(\"登 录\")])],1)],1)],1),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('div',[_c('span',[_vm._v(\"如果没有账号可以\")]),_c('RouterLink',{attrs:{\"to\":{ path: '/Register' }}},[_c('span',{staticClass:\"pointer\",staticStyle:{\"padding-left\":\"10px\",\"color\":\"#F98C54\"}},[_vm._v(\" 立即注册 \")])])],1),_vm._m(1)])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"flex\":\"1\"}},[_c('img',{staticStyle:{\"width\":\"800px\",\"border-radius\":\"5px\"},attrs:{\"src\":require(\"@/assets/虚夜宫.webp\")}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('span',{staticClass:\"pointer\",staticStyle:{\"color\":\"palevioletred\"}},[_vm._v(\"忘记密码\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div style=\"height: 100vh; display: flex;align-items: center;justify-content: center;background-color: grey;\">\n      <div style=\"display: flex;justify-content: center;background-color: white;padding:20px;border-radius: 10px;\">\n        <div style=\"flex:1\">\n          <img style=\"width:800px;border-radius: 5px;\" src=\"@/assets/虚夜宫.webp\">\n\n        </div>\n        <div style=\"flex:1;margin-left: 35px;display: flex;flex-direction: column;justify-content: space-between;\">\n          <div style=\"width:500px\">\n            <h2>欢迎您~来到诚凛自习室预约系统</h2>\n            <el-form style=\"margin-top:30px\" ref=\"loginForm\" :model=\"formData\" label-width=\"70px\" label-position=\"left\"\n              :rules=\"rules\">\n\n              <el-form-item label=\"账号\" prop=\"UserName\">\n                <el-input type=\"text\" v-model.trim=\"formData.UserName\" placeholder=\"请输入账号\">\n                </el-input>\n              </el-form-item>\n\n              <el-form-item label=\"密码\" prop=\"Password\">\n                <el-input type=\"password\" v-model.trim=\"formData.Password\" placeholder=\"请输入密码\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"角色\" prop=\"RoleType\">\n                <el-radio-group v-model=\"formData.RoleType\">\n                  <el-radio v-for=\"(item, index) in roleOptions\" :key=\"item.Code\" :label=\"item.Code\">{{ item.Label\n                    }}</el-radio>\n                </el-radio-group>\n              </el-form-item>\n              <el-form-item label=\"验证码\" prop=\"Code\">\n                <div style=\"display: flex;\">\n                  <el-input text=\"Code\" v-model.trim=\"formData.Code\" placeholder=\"请输入验证码\"></el-input>\n                  <div style=\"margin-left:10px\">\n                    <ValidCode ref=\"ValidCode\"></ValidCode>\n                  </div>\n                </div>\n              </el-form-item>\n              <el-form-item>\n                <el-button style=\"width: 100%;\" type=\"primary\" @click=\"LoginBtn\">登 录</el-button>\n\n              </el-form-item>\n            </el-form>\n          </div>\n          <div style=\"display: flex; justify-content: space-between;\">\n            <div>\n              <span>如果没有账号可以</span>\n              <RouterLink :to=\"{ path: '/Register' }\"><span style=\"padding-left:10px; color:#F98C54;\" class=\"pointer\">\n                  立即注册\n                </span>\n              </RouterLink>\n            </div>\n            <div><span style=\"color:palevioletred\" class=\"pointer\">忘记密码</span></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ValidCode from '@/components/Code/canvas.vue'\nimport store from '@/store';\nexport default {\n  components: {\n    ValidCode: ValidCode\n  },\n  data() {\n    return {\n      formData: {\n        UserName: '',\n        Password: '',\n        RoleType: \"\",\n        Code: \"\"\n      },\n      roleOptions: [],\n      rules: {\n        UserName: [\n          { required: true, message: '请输入账号', trigger: 'blur' },\n        ],\n        Password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ],\n        RoleType: [\n          { required: true, message: '请选择角色', trigger: 'blur' },\n        ],\n\n        Code: [\n          { required: true, message: '请输入验证码', trigger: 'blur' },\n          {\n            validator: (rule, value, callback) => {\n              let identifyCode = this.$refs.ValidCode.getCode();\n\n              if (value != identifyCode) {\n                callback(new Error('请输入正确的验证码'));\n              } else {\n                callback();\n              }\n            }, trigger: 'blur'\n          }\n        ]\n      }\n    }\n\n  },\n  created() {\n    this.GetRoleTypeApi();\n  },\n  methods: {\n    async GetRoleTypeApi() {\n      let { Data: { Items } } = await this.$Post(\"/Select/RoleType\");\n\n      this.roleOptions = Items\n\n    },\n    LoginBtn() {\n      this.$refs.loginForm.validate(async (valid) => {\n        if (valid) {\n\n          let res = await store.dispatch(\"Login\", this.formData);\n          if (res.Success) {\n            this.$message.success(\"登录成功!\");\n            this.$router.push({\n              path: \"/Admin\"\n            })\n\n          }\n          else {\n\n            this.$refs.ValidCode.refreshCode();\n          }\n        } else {\n          this.$message.error(\"登录验证不通过\")\n          this.$refs.ValidCode.refreshCode();\n          return false;\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style></style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=0f128772\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","on","refreshCode","attrs","contentWidth","contentHeight","staticRenderFns","name","props","fontSizeMin","type","Number","default","fontSizeMax","backgroundColorMin","backgroundColorMax","colorMin","colorMax","lineColorMin","lineColorMax","dotColorMin","dotColorMax","data","identifyCode","identifyCodes","mounted","makeCode","drawPic","methods","randomNum","min","max","Math","floor","random","randomColor","r","g","b","canvas","document","getElementById","ctx","getContext","textBaseline","fillStyle","fillRect","i","length","drawText","drawLine","drawDot","txt","font","x","y","deg","translate","rotate","PI","fillText","strokeStyle","beginPath","moveTo","lineTo","stroke","arc","fill","o","l","getCode","component","staticStyle","_m","_v","ref","formData","rules","model","value","UserName","callback","$$v","$set","trim","expression","Password","RoleType","_l","roleOptions","item","index","key","Code","_s","Label","LoginBtn","path","require","components","ValidCode","required","message","trigger","validator","rule","$refs","Error","created","GetRoleTypeApi","Data","Items","$Post","loginForm","validate","valid","$message","error","res","store","dispatch","Success","success","$router","push"],"sourceRoot":""}